<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Mess Profitability ‚Äî Executive Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --navy: #1B2A4A;
            --navy-light: #253a66;
            --teal: #2EC4B6;
            --teal-dark: #1A6B5C;
            --gold: #D4A853;
            --red: #E74C3C;
            --green: #27AE60;
            --bg: #0d1117;
            --card-bg: rgba(27, 42, 74, 0.45);
            --card-border: rgba(46, 196, 182, 0.18);
            --text: #e6edf3;
            --text-muted: #8b949e;
            --glass-blur: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated gradient background */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse at 20% 50%, rgba(46, 196, 182, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(212, 168, 83, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(27, 42, 74, 0.15) 0%, transparent 50%);
            animation: drift 20s ease-in-out infinite alternate;
            z-index: -1;
        }

        @keyframes drift {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }

            100% {
                transform: translate(-3%, 3%) rotate(2deg);
            }
        }

        .container {
            max-width: 1320px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 48px;
            position: relative;
        }

        .header h1 {
            font-size: 2.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--teal), var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .header .subtitle {
            color: var(--text-muted);
            font-size: 1.05rem;
            margin-top: 8px;
            font-weight: 300;
        }

        .header .badge {
            display: inline-block;
            margin-top: 14px;
            padding: 5px 18px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            border: 1px solid var(--teal);
            color: var(--teal);
        }

        /* KPI Grid */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .kpi-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 28px 24px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            border-radius: 16px 16px 0 0;
        }

        .kpi-card:nth-child(1)::before {
            background: var(--teal);
        }

        .kpi-card:nth-child(2)::before {
            background: var(--red);
        }

        .kpi-card:nth-child(3)::before {
            background: var(--green);
        }

        .kpi-card:nth-child(4)::before {
            background: var(--gold);
        }

        .kpi-card:nth-child(5)::before {
            background: #8E44AD;
        }

        .kpi-card:nth-child(6)::before {
            background: #3498DB;
        }

        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(46, 196, 182, 0.12);
        }

        .kpi-label {
            font-size: 0.78rem;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .kpi-value {
            font-size: 1.9rem;
            font-weight: 700;
        }

        .kpi-card:nth-child(1) .kpi-value {
            color: var(--teal);
        }

        .kpi-card:nth-child(2) .kpi-value {
            color: var(--red);
        }

        .kpi-card:nth-child(3) .kpi-value {
            color: var(--green);
        }

        .kpi-card:nth-child(4) .kpi-value {
            color: var(--gold);
        }

        .kpi-card:nth-child(5) .kpi-value {
            color: #8E44AD;
        }

        .kpi-card:nth-child(6) .kpi-value {
            color: #3498DB;
        }

        /* Chart containers */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .chart-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 28px;
            transition: transform 0.3s ease;
        }

        .chart-card:hover {
            transform: translateY(-2px);
        }

        .chart-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(46, 196, 182, 0.15);
        }

        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 320px;
        }

        /* P&L Table */
        .section-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--teal);
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--card-border);
        }

        .pl-table-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 40px;
            overflow-x: auto;
        }

        .pl-table {
            width: 100%;
            border-collapse: collapse;
        }

        .pl-table th {
            text-align: left;
            padding: 12px 16px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: var(--text-muted);
            border-bottom: 2px solid var(--card-border);
        }

        .pl-table td {
            padding: 10px 16px;
            font-size: 0.92rem;
            border-bottom: 1px solid rgba(46, 196, 182, 0.08);
        }

        .pl-table tr:hover {
            background: rgba(46, 196, 182, 0.04);
        }

        .pl-table .section-header td {
            font-weight: 700;
            color: var(--teal);
            font-size: 0.95rem;
            padding-top: 18px;
        }

        .pl-table .total-row td {
            font-weight: 700;
            border-top: 2px solid var(--card-border);
            padding-top: 14px;
        }

        .pl-table .profit-row td {
            font-weight: 800;
            font-size: 1.05rem;
            color: var(--green);
            border-top: 3px double var(--teal);
        }

        .pl-table .indent {
            padding-left: 36px;
        }

        .pl-table .amount {
            text-align: right;
            font-variant-numeric: tabular-nums;
        }

        .pl-table .pct {
            text-align: right;
            color: var(--text-muted);
        }

        /* Insights */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .insight-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 28px;
        }

        .insight-card h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-card h3 .icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .insight-card ul {
            list-style: none;
            padding: 0;
        }

        .insight-card li {
            padding: 8px 0 8px 20px;
            position: relative;
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--text-muted);
        }

        .insight-card li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: var(--teal);
            font-weight: 700;
        }

        /* Scenario Table */
        .scenario-table {
            width: 100%;
            border-collapse: collapse;
        }

        .scenario-table th {
            padding: 14px 12px;
            font-size: 0.78rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: var(--text-muted);
            text-align: right;
            border-bottom: 2px solid var(--card-border);
        }

        .scenario-table th:first-child {
            text-align: left;
        }

        .scenario-table td {
            padding: 11px 12px;
            font-size: 0.88rem;
            text-align: right;
            border-bottom: 1px solid rgba(46, 196, 182, 0.08);
            font-variant-numeric: tabular-nums;
        }

        .scenario-table td:first-child {
            text-align: left;
            font-weight: 500;
        }

        .scenario-table tr:hover {
            background: rgba(46, 196, 182, 0.04);
        }

        .scenario-table tr.highlight {
            background: rgba(212, 168, 83, 0.08);
        }

        .scenario-table tr.highlight td {
            font-weight: 700;
            color: var(--gold);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 0 20px;
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .footer span {
            color: var(--teal);
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.6rem;
            }

            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .chart-grid,
            .insights-grid {
                grid-template-columns: 1fr;
            }

            .kpi-value {
                font-size: 1.4rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>College Mess Profitability Model</h1>
            <p class="subtitle">Consulting-Grade Financial Analysis ‚Äî Indian Hostel Mess Operations</p>
            <span class="badge">Arnav Petwal</span>
        </div>

        <!-- KPI Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-label">Monthly Revenue</div>
                <div class="kpi-value">‚Çπ29.25L</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Total Costs</div>
                <div class="kpi-value">‚Çπ25.57L</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Net Profit</div>
                <div class="kpi-value">‚Çπ3.68L</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Profit Margin</div>
                <div class="kpi-value">12.58%</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Food Wastage Cost</div>
                <div class="kpi-value">‚Çπ2.11L</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Break-even Students</div>
                <div class="kpi-value">569</div>
            </div>
        </div>

        <!-- Charts row 1 -->
        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">Cost Structure Breakdown</div>
                <div class="chart-wrapper"><canvas id="costPie"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">Revenue vs Costs vs Profit</div>
                <div class="chart-wrapper"><canvas id="waterfallBar"></canvas></div>
            </div>
        </div>

        <!-- P&L Statement -->
        <h2 class="section-title">Monthly Profit & Loss Statement</h2>
        <div class="pl-table-card">
            <table class="pl-table">
                <thead>
                    <tr>
                        <th>Line Item</th>
                        <th class="amount">Amount (‚Çπ)</th>
                        <th class="pct">% of Revenue</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="section-header">
                        <td colspan="3">Revenue</td>
                    </tr>
                    <tr>
                        <td class="indent">Total Students √ó Monthly Fee (650 √ó ‚Çπ4,500)</td>
                        <td class="amount">29,25,000</td>
                        <td class="pct">100.00%</td>
                    </tr>

                    <tr class="section-header">
                        <td colspan="3">Variable Costs</td>
                    </tr>
                    <tr>
                        <td class="indent">Raw Food Cost</td>
                        <td class="amount">17,55,000</td>
                        <td class="pct">60.00%</td>
                    </tr>
                    <tr>
                        <td class="indent">Food Wastage Cost (12%)</td>
                        <td class="amount">2,10,600</td>
                        <td class="pct">7.20%</td>
                    </tr>
                    <tr>
                        <td class="indent">LPG / Fuel</td>
                        <td class="amount">55,000</td>
                        <td class="pct">1.88%</td>
                    </tr>
                    <tr>
                        <td class="indent">Water</td>
                        <td class="amount">18,000</td>
                        <td class="pct">0.62%</td>
                    </tr>
                    <tr>
                        <td class="indent">Packaging & Disposables</td>
                        <td class="amount">12,000</td>
                        <td class="pct">0.41%</td>
                    </tr>
                    <tr class="total-row">
                        <td>Total Variable Costs</td>
                        <td class="amount">20,50,600</td>
                        <td class="pct">70.11%</td>
                    </tr>

                    <tr class="section-header">
                        <td colspan="3">Fixed Costs</td>
                    </tr>
                    <tr>
                        <td class="indent">Staff Salaries</td>
                        <td class="amount">2,20,000</td>
                        <td class="pct">7.52%</td>
                    </tr>
                    <tr>
                        <td class="indent">Electricity</td>
                        <td class="amount">45,000</td>
                        <td class="pct">1.54%</td>
                    </tr>
                    <tr>
                        <td class="indent">Maintenance</td>
                        <td class="amount">20,000</td>
                        <td class="pct">0.68%</td>
                    </tr>
                    <tr>
                        <td class="indent">Rent</td>
                        <td class="amount">60,000</td>
                        <td class="pct">2.05%</td>
                    </tr>
                    <tr>
                        <td class="indent">Insurance & Misc</td>
                        <td class="amount">15,000</td>
                        <td class="pct">0.51%</td>
                    </tr>
                    <tr class="total-row">
                        <td>Total Fixed Costs</td>
                        <td class="amount">3,60,000</td>
                        <td class="pct">12.31%</td>
                    </tr>

                    <tr class="total-row">
                        <td>Total Cost</td>
                        <td class="amount">24,10,600</td>
                        <td class="pct">82.42%</td>
                    </tr>

                    <tr class="profit-row">
                        <td>Net Profit</td>
                        <td class="amount">5,14,400</td>
                        <td class="pct">17.59%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Charts row 2 -->
        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">Profit by Optimization Scenario</div>
                <div class="chart-wrapper"><canvas id="scenarioBar"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">Profit Margin % by Scenario</div>
                <div class="chart-wrapper"><canvas id="marginBar"></canvas></div>
            </div>
        </div>

        <!-- Scenario Table -->
        <h2 class="section-title">Optimization Scenario Analysis</h2>
        <div class="pl-table-card">
            <table class="scenario-table" id="scenarioTable">
                <thead>
                    <tr>
                        <th>Scenario</th>
                        <th>Revenue</th>
                        <th>Variable</th>
                        <th>Fixed</th>
                        <th>Total Cost</th>
                        <th>Profit</th>
                        <th>Margin %</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Consulting Insights -->
        <h2 class="section-title">Consulting Insights & Recommendations</h2>
        <div class="insights-grid">
            <div class="insight-card">
                <h3><span class="icon" style="background:rgba(231,76,60,0.15);color:var(--red)">‚ö†</span> Key
                    Inefficiencies</h3>
                <ul>
                    <li>Food wastage at 12% translates to ‚Çπ2.11L/month of avoidable cost</li>
                    <li>No dynamic menu planning ‚Äî fixed menu leads to over-production on low-attendance days</li>
                    <li>Energy &amp; fuel costs (LPG + electricity) represent ~3.4% of revenue with no efficiency
                        monitoring</li>
                    <li>Manual inventory management causes 5‚Äì8% over-ordering of perishable goods</li>
                    <li>Break-even at 569 students leaves a thin safety margin of only 81 students</li>
                </ul>
            </div>
            <div class="insight-card">
                <h3><span class="icon" style="background:rgba(46,196,182,0.15);color:var(--teal)">üîç</span> Root Cause
                    Analysis</h3>
                <ul>
                    <li><strong>Wastage:</strong> Absence of attendance-based demand forecasting; batch cooking without
                        portion control</li>
                    <li><strong>Energy:</strong> Aged kitchen equipment (&gt;5 yrs); no sub-metering for consumption
                        tracking</li>
                    <li><strong>Procurement:</strong> No vendor benchmarking; single-supplier reliance inflates
                        raw-material cost</li>
                    <li><strong>Pricing:</strong> Mess fee unchanged for 2+ years despite 8‚Äì10% food inflation</li>
                </ul>
            </div>
            <div class="insight-card">
                <h3><span class="icon" style="background:rgba(39,174,96,0.15);color:var(--green)">üí°</span>
                    Recommendations</h3>
                <ul>
                    <li><strong>Quick Win:</strong> Implement meal pre-booking app to forecast demand (est. 40% wastage
                        reduction)</li>
                    <li>Negotiate bulk / multi-vendor procurement ‚Äî target 5‚Äì7% raw-material savings</li>
                    <li>Install sub-metering &amp; switch to energy-efficient equipment ‚Äî target 5% energy reduction
                    </li>
                    <li>Revise mess fee by ‚Çπ200/month (4.4% increase, still below market ‚Çπ5,000+)</li>
                    <li>Introduce weekend opt-out system to reduce per-meal variable cost</li>
                </ul>
            </div>
            <div class="insight-card">
                <h3><span class="icon" style="background:rgba(212,168,83,0.15);color:var(--gold)">üìà</span> Estimated
                    Financial Impact</h3>
                <ul>
                    <li><strong>Current Profit:</strong> ‚Çπ5.14L/month (17.59% margin)</li>
                    <li><strong>Optimized Profit:</strong> ‚Çπ8.83L/month (27.56% margin)</li>
                    <li><strong>Incremental Gain:</strong> ‚Çπ3.69L/month</li>
                    <li><strong>Annualized Improvement:</strong> ‚Çπ44.28L/year</li>
                    <li><strong>Margin Uplift:</strong> +9.97 percentage points</li>
                </ul>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>College Mess Profitability Optimization Model &bull; <span>Arnav Petwal</span> &bull; Built
                with Python &amp; Chart.js</p>
        </div>
    </div>

    <script>
        // ‚îÄ‚îÄ Data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const scenarios = [
            { name: "Base Case", revenue: 2925000, variable: 2050600, fixed: 360000, total: 2410600, profit: 514400, margin: 17.59 },
            { name: "Wastage ‚àí5pp", revenue: 2925000, variable: 1962850, fixed: 360000, total: 2322850, profit: 602150, margin: 20.59 },
            { name: "Wastage ‚àí10pp", revenue: 2925000, variable: 1875100, fixed: 360000, total: 2235100, profit: 689900, margin: 23.59 },
            { name: "Wastage ‚àí15pp", revenue: 2925000, variable: 1787350, fixed: 360000, total: 2147350, profit: 777650, margin: 26.59 },
            { name: "Efficiency +2%", revenue: 2925000, variable: 2047840, fixed: 358300, total: 2406140, profit: 518860, margin: 17.74 },
            { name: "Efficiency +5%", revenue: 2925000, variable: 2043700, fixed: 355750, total: 2399450, profit: 525550, margin: 17.97 },
            { name: "Efficiency +8%", revenue: 2925000, variable: 2039560, fixed: 353200, total: 2392760, profit: 532240, margin: 18.20 },
            { name: "Fee +‚Çπ100", revenue: 2990000, variable: 2050600, fixed: 360000, total: 2410600, profit: 579400, margin: 19.38 },
            { name: "Fee +‚Çπ200", revenue: 3055000, variable: 2050600, fixed: 360000, total: 2410600, profit: 644400, margin: 21.10 },
            { name: "Fee +‚Çπ300", revenue: 3120000, variable: 2050600, fixed: 360000, total: 2410600, profit: 709400, margin: 22.74 },
            { name: "Combined Optimized", revenue: 3055000, variable: 1871690, fixed: 355750, total: 2227440, profit: 827560, margin: 27.09 },
        ];

        const INR = v => '‚Çπ' + v.toLocaleString('en-IN');

        // ‚îÄ‚îÄ Scenario Table ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const tbody = document.querySelector('#scenarioTable tbody');
        scenarios.forEach(s => {
            const tr = document.createElement('tr');
            if (s.name === 'Combined Optimized') tr.className = 'highlight';
            tr.innerHTML = `
                <td>${s.name}</td>
                <td>${INR(s.revenue)}</td>
                <td>${INR(s.variable)}</td>
                <td>${INR(s.fixed)}</td>
                <td>${INR(s.total)}</td>
                <td>${INR(s.profit)}</td>
                <td>${s.margin.toFixed(2)}%</td>`;
            tbody.appendChild(tr);
        });

        // ‚îÄ‚îÄ Chart defaults ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        Chart.defaults.color = '#8b949e';
        Chart.defaults.borderColor = 'rgba(46,196,182,0.08)';
        Chart.defaults.font.family = 'Inter';

        // ‚îÄ‚îÄ Cost Pie ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        new Chart(document.getElementById('costPie'), {
            type: 'doughnut',
            data: {
                labels: ['Raw Food', 'Wastage', 'LPG/Fuel', 'Water', 'Packaging', 'Staff', 'Electricity', 'Maintenance', 'Rent', 'Insurance'],
                datasets: [{
                    data: [1755000, 210600, 55000, 18000, 12000, 220000, 45000, 20000, 60000, 15000],
                    backgroundColor: ['#1B2A4A', '#2EC4B6', '#D4A853', '#E74C3C', '#3498DB', '#8E44AD', '#27AE60', '#F39C12', '#1ABC9C', '#95A5A6'],
                    borderWidth: 0,
                    hoverOffset: 12,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '55%',
                plugins: {
                    legend: { position: 'right', labels: { padding: 14, usePointStyle: true, pointStyle: 'rectRounded' } },
                    tooltip: { callbacks: { label: ctx => ` ${ctx.label}: ${INR(ctx.raw)} (${(ctx.raw / 2410600 * 100).toFixed(1)}%)` } }
                }
            }
        });

        // ‚îÄ‚îÄ Waterfall Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        new Chart(document.getElementById('waterfallBar'), {
            type: 'bar',
            data: {
                labels: ['Revenue', 'Variable Costs', 'Fixed Costs', 'Net Profit'],
                datasets: [{
                    data: [2925000, 2050600, 360000, 514400],
                    backgroundColor: ['#27AE60', '#E74C3C', '#E67E22', '#1A6B5C'],
                    borderRadius: 6,
                    borderSkipped: false,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => INR(ctx.raw) } }
                },
                scales: {
                    y: { ticks: { callback: v => '‚Çπ' + (v / 100000).toFixed(0) + 'L' }, grid: { color: 'rgba(46,196,182,0.06)' } },
                    x: { grid: { display: false } }
                }
            }
        });

        // ‚îÄ‚îÄ Scenario Profit Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        new Chart(document.getElementById('scenarioBar'), {
            type: 'bar',
            data: {
                labels: scenarios.map(s => s.name),
                datasets: [{
                    label: 'Profit (‚Çπ)',
                    data: scenarios.map(s => s.profit),
                    backgroundColor: scenarios.map(s =>
                        s.name === 'Combined Optimized' ? '#D4A853' :
                            s.profit > 514400 ? '#27AE60' : '#1B2A4A'),
                    borderRadius: 4,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => INR(ctx.raw) } }
                },
                scales: {
                    x: { ticks: { callback: v => '‚Çπ' + (v / 100000).toFixed(1) + 'L' }, grid: { color: 'rgba(46,196,182,0.06)' } },
                    y: { grid: { display: false } }
                }
            }
        });

        // ‚îÄ‚îÄ Margin Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        new Chart(document.getElementById('marginBar'), {
            type: 'bar',
            data: {
                labels: scenarios.map(s => s.name),
                datasets: [{
                    label: 'Margin %',
                    data: scenarios.map(s => s.margin),
                    backgroundColor: scenarios.map(s =>
                        s.name === 'Combined Optimized' ? '#D4A853' :
                            s.margin > 17.59 ? '#1A6B5C' : '#1B2A4A'),
                    borderRadius: 4,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => ctx.raw.toFixed(2) + '%' } }
                },
                scales: {
                    x: { ticks: { callback: v => v + '%' }, grid: { color: 'rgba(46,196,182,0.06)' } },
                    y: { grid: { display: false } }
                }
            }
        });
    </script>
</body>

</html>